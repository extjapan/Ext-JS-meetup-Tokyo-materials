/*
 * File: MyViewport.js
 * Date: Wed Apr 21 2010 11:39:34 GMT+0900 (JST)
 * 
 * This file was generated by Ext Designer version xds-1.0.0.8.
 * http://www.extjs.com/products/designer/
 *
 * This file will be generated the first time you export.
 *
 * You should implement event handling and custom methods in this
 * class.
 */

MyViewport = Ext.extend(MyViewportUi, {
    initComponent: function() {
        MyViewport.superclass.initComponent.call(this);
				this.tree.on('click', this.onTreeClick, this);
				this.btnOk.on('click', this.onOkClick, this);
				this.btnCancel.on('click', this.onCancelClick, this);

    },

		onTreeClick: function(node,e){
			if(node.text.indexOf('data')==-1) return;

			var url = node.text + '.json';
			var store = this.grid.getStore();
			store.proxy.setUrl(url);
			store.load();
		},

		onOkClick: function(){
			var form = this.form.getForm();
			var store = this.grid.getStore();

			var values = form.getFieldValues();
			store.loadData({
				id: values.idField,
				name: values.nameField,
				desc: values.descField
			}, true);
			form.reset();
		},

		onCancelClick: function(){
			var form = this.form.getForm();	
			form.reset();
		}
});
